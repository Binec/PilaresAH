<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/formulariotaller.css">
    <title>Document</title>
    <script src="/js/script.js">
        document.getElementById("formtaller").onsubmit = async function(event) {
            event.preventDefault();
            const formData = new formData(this);
            const response = await fetch("https://script.google.com/macros/s/AKfycbwV_wBzmSk8OA5cDh10bkeuL-HUsA4JL18JoVaL2IzT-0xtQT1sHko47R6m_FkZ5ehq/exec", {
                method:"POST",
                body:formData
            });
            if (response.ok) {
                alert("Creacion de taller exitoso");
                this.reset();                
            } else{
                alert("vuelve a intentarlo");
            }
        };
    </script>
</head>
<body>
<div id="talleres_container">
    <form id="formtaller" style="display: block;">
        <div>
            <h1 id="titformulario">Crea un nuevo taller</h1>
        </div>
        <div id="formconteiner">
            <p id="llena">Llena todos los campos</p>
            <input type="text" id="taller" class="inputtn" placeholder="Nombre del taller">
            <input type="text" id="tallerista" class="inputtn" placeholder="Nombre del tallerista">
            <input type="text" id="usuario" class="inputtn" placeholder="Nombre completo">
            <input type="text" id="descripcion" class="inputdes" placeholder="Descripcion breve">
            <input type="text" id="celular" class="inputcorreocel" placeholder="Correo Electrónico">
            <input type="text" id="correo" class="inputcorreocel" placeholder="Numero celular">
            <div class="container">
                <h1>Seleccione los días y horarios</h1>
                <form id="scheduleForm">
                    <div class="day-time">
                    <label for="day">Día de la semana:</label>
                    <select id="dia" name="day[]" class="day">
                        <option value="lunes">Lunes</option>
                        <option value="martes">Martes</option>
                        <option value="miércoles">Miércoles</option>
                        <option value="jueves">Jueves</option>
                        <option value="viernes">Viernes</option>
                        <option value="sábado">Sábado</option>
                        <option value="domingo">Domingo</option>
                    </select>
                    <label for="startTime">Hora de inicio:</label>
                    <select id="horainicio" name="startTime[]" class="startTime">
                        <!-- Las opciones de tiempo se agregarán dinámicamente con JavaScript -->
                    </select>
                    <label for="endTime">Hora de fin:</label>
                    <select id="horafin" name="endTime[]" class="endTime">
                        <!-- Las opciones de tiempo se agregarán dinámicamente con JavaScript -->
                    </select>
                    </div>
                    <button type="button" id="addSchedule">Añadir otro día</button>
                    <button type="submit">Enviar</button>
                </form>
            </div>
        </div>    
    </form>
</div>
<script>
    // Función para añadir un nuevo día y horario
document.getElementById("addSchedule").addEventListener("click", function () {
  const newDayTime = document.createElement("div");
  newDayTime.classList.add("day-time");

  // Crear selectores para el día de la semana y las horas
  const dayLabel = document.createElement("label");
  dayLabel.textContent = "Día de la semana:";
  const daySelect = document.createElement("select");
  daySelect.name = "day[]";
  daySelect.classList.add("day");
  daySelect.innerHTML = `
    <option value="lunes">Lunes</option>
    <option value="martes">Martes</option>
    <option value="miércoles">Miércoles</option>
    <option value="jueves">Jueves</option>
    <option value="viernes">Viernes</option>
    <option value="sábado">Sábado</option>
    <option value="domingo">Domingo</option>
  `;

  const startTimeLabel = document.createElement("label");
  startTimeLabel.textContent = "Hora de inicio:";
  const startTimeSelect = document.createElement("select");
  startTimeSelect.name = "startTime[]";
  startTimeSelect.classList.add("startTime");
  generateTimeOptions(startTimeSelect);  // Generar opciones de tiempo

  const endTimeLabel = document.createElement("label");
  endTimeLabel.textContent = "Hora de fin:";
  const endTimeSelect = document.createElement("select");
  endTimeSelect.name = "endTime[]";
  endTimeSelect.classList.add("endTime");
  generateTimeOptions(endTimeSelect);  // Generar opciones de tiempo

  // Agregar los elementos creados al nuevo div
  newDayTime.appendChild(dayLabel);
  newDayTime.appendChild(daySelect);
  newDayTime.appendChild(startTimeLabel);
  newDayTime.appendChild(startTimeSelect);
  newDayTime.appendChild(endTimeLabel);
  newDayTime.appendChild(endTimeSelect);

  // Añadir el nuevo día y horario al formulario
  document.getElementById("scheduleForm").insertBefore(newDayTime, document.getElementById("addSchedule"));
});

// Al cargar la página, agregar las opciones de tiempo al primer select de horas
document.addEventListener("DOMContentLoaded", function () {
  const startTimeSelect = document.querySelector("select.startTime");
  const endTimeSelect = document.querySelector("select.endTime");

  generateTimeOptions(startTimeSelect);
  generateTimeOptions(endTimeSelect);
});
</script>

</body>
</html>